var _barData = [0.8, 0.8, 1, 0.8, 0.999999880000024, 1, 0.6000000000000001, 0.8, 1.2, 0.8, 1.199999880000024, 1.2, 0.8, 0.6000000000000001, 1.3999998800000242, 0.8, 1.2, 0.8, 0.6000000000000001, 1, 1.199999880000024, 0.8, 0.8, 0.8, 1, 1.5999998800000241, 1, 1, 1, 1, 1.7999998800000239, 2.4000000000000004, 3.6000000000000005, 3.8000000000000007, 5.399999880000025, 4, 4.800000000000001, 4.4, 5.000000000000001, 5.000000000000001, 5.4, 6.200000000000001, 5.399999880000025, 3.8000000000000007, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];
var _lineData1 = [1.1999999452500112, 1.0624999662500068, 1.0374999775000047, 0.937499985000003, 0.9249999925000014, 1.0999999625000074, 1.0249999625000075, 0.9249999850000028, 1.0999999775000044, 0.8124999999999999, 1.1499999400000116, 0.9874999850000029, 1.0249999700000059, 1.0874999700000059, 0.7374999999999997, 1.0749999775000045, 1.062499955000009, 1.0499999775000046, 0.9249999925000013, 0.8749999925000015, 1.1374999550000093, 1.099999955000009, 1.0124999775000043, 0.9999999850000029, 0.8374999925000014, 1.2874999700000063, 1.2749999625000075, 1.0374999775000044, 0.9624999925000013, 1.2499999550000092, 1.524999970000006, 3.44999994750001, 4.649999872500026, 5.112499865000028, 5.162499887500023, 5.437499880000025, 5.524999902500021, 5.546666546666691, 5.559999912000018, 5.626666586666683, 5.959999904000019, 6.1999998575000275, 5.362499895000021, 5.262499850000031, 5.024999842500032, 5.199999850000031, 5.662499827500035, 5.39999985750003, 5.874999767500048, 5.26249970750006, 5.8499997225000575, 5.937499685000063, 6.549999662500067, 6.337499677500064, 5.9749996775000636, 5.924999647500069, 6.262499572500086, 6.799999490000103, 6.737499482500105, 6.999999475000107, 6.8823524258824555, 6.364705423529504, 6.0705877694118575, 5.917646642353025, 5.952940752941261, 5.9647055717647675, 6.011764352941247, 5.894117329411829, 5.305882035294183, 5.087499692500061, 4.599999715000058, 4.624999692500062, 3.8624997675000463, 3.3499997975000406, 3.1529409929412133, 3.0588233600000336, 2.835293927058862, 2.5294116094117958, 2.8235292282353313, 2.576470418823564, 2.6117645435294445, 2.505882176470624, 2.3647057411764982, 2.341176329411793, 1.9294116517647284, 1.7647057976470752, 1.2705881929411849, 1.3058823035294216, 1.1176470376470626, 1.2352940611764818, 1.2235293694117733, 1.070588214117651, 1.023529383529417, 1.082352920000004, 0.8823529200000041, 0.9999999788235335];
var _lineData2 =  [0.9249999730000054, 0.8749999850000028, 0.999999990000002, 0.9499999600000082, 0.9499999800000041, 1.083333293333341, 0.7666666566666688, 0.9666666566666686, 0.9166666566666686, 0.9833332833333434, 1.14999995000001, 0.75, 1.0666666566666685, 0.8833332933333414, 0.999999960000008, 1.116666646666671, 0.8166666566666687, 1.0166666366666726, 0.8999999999999999, 0.9333332933333414, 1.0666666266666747, 0.9999999800000039, 0.899999980000004, 0.8833333233333354, 1.099999940000012, 1.099999990000002, 1.0166666566666684, 1.333333303333339, 1.0583332933333416, 0.9916666366666727, 0.9833333133333373, 1.1666666366666727, 1.049999980000004, 1.066666616666677, 1.0999999800000038, 1.299999960000008, 0.8166666566666686, 1.0499999900000019, 0.9999999800000039, 0.9999999800000041, 1.083333323333335, 1.2333333133333375, 0.9666666566666687, 1.049999990000002, 1.1666666566666688, 1.2166666466666705, 1.3333333233333358, 1.3166666566666687, 1.3499999900000021, 1.1333333233333351, 1.2666666566666684, 1.383333293333341, 1.333333303333339, 1.2666666466666707, 1.1166666466666706, 1.3333333033333392, 1.2666666366666728, 1.3166666366666726, 1.4166666366666725, 1.3666666266666745, 1.3166666166666767, 1.3999999700000059, 1.2499999600000078, 1.4499999400000116, 1.29999995000001, 1.3499999500000102, 1.3999999300000137, 1.3333332833333433, 1.1666666266666745, 1.149999970000006, 1.199999960000008, 1.0499999800000042, 1.0833332933333415, 0.9333333133333374, 1.2166666266666746, 1.2333332833333432, 1.0166666266666746, 0.9166666566666686, 1.099999970000006, 1.14999995000001, 1.1166665966666807, 1.0166666466666703, 1.0333333133333373, 0.9833333033333393, 0.9833333133333373, 1.1499999400000118, 0.8833333233333354, 0.8833333233333354, 0.9166666366666727, 1.0666666466666708, 0.849999980000004, 1.0666666266666744, 0.9666666366666725, 0.8833333233333351, 0.9499999800000041, 1.1666666166666766];



$(function(){
//	데이트 피커
	enernet.modules.evt.makeDateYMD("dateTarget");
	
	//	조회 버튼
	$("#searchBtn").on('click', function(){
		$("#searchForm").submit();
	});
	
	var _timeChartLabel = enernet.modules.utils.getTimeChartLabel(); 
	
	var _usageChart = drawUsageChart(document.getElementById('usageChart'), _barData, _lineData1, _lineData2, _timeChartLabel);
	var _wonChart = drawWonChart(document.getElementById('wonChart'), _barData, _lineData1, _lineData2, _timeChartLabel);
	
	//console.log(_usageChart)
	
	//	전체 사용량 차트를 그림
	function drawUsageChart(target, barData, lineData1, lineData2, chartLabel){
		var _chart = new Chart(target, {
		    type: 'bar',
		    data: {
		        datasets: [
		        	{
			            label: '실시간 사용량',
			            data: barData,	//	bar chart
			            borderWidth: 2,
			            backgroundColor: 'rgba(255, 0, 0, 0.5)',
			            order: 1
			        }, 
			        {
			            label: '기준 사용량',
			            data: lineData1,	//	line chart
			            type: 'line',
			            borderColor: 'rgba(0, 0, 255, 0.5)',
			            fill: false,
			            order: 2
			        },
			        {
			            label: '목표 사용량',
			            data: lineData2,	//	line chart
			            type: 'line',
			            borderColor: 'rgba(0, 180, 180, 0.5)',
			            fill: false,
			            order: 3
			        }
			        ],
		        labels: chartLabel 
		    },
		    options: {
		    	scales:{
		    		xAxes: [{
		    			gridLines: {
		                    display:false
		                },
		    			ticks: {
		    				autoSkip: false,
		    				maxRotation: 0,
		    				fontSize: 12
		    			}
		    		}],
		    		yAxes: [{
		    			ticks: {
		    				suggestedMax: 20,
		    				fontSize: 14
		    			},
		    			scaleLabel: {
		    				display: true,
		    				labelString: 'kWh',
		    				fontSize: 14
		    			}
		    		}]
		    	},
				responsive: true,
				maintainAspectRatio: false,
			    elements: {
		            point:{
		                radius: 0
		            },
		            line: {
		            	tension: 0
		            }
		        }
			}
		});
		
		return _chart;
	}//
	
	//	전체 사용 요금 차트를 그림
	function drawWonChart(target, barData, lineData1, lineData2, chartLabel){
		var _chart = new Chart(target, {
		    type: 'bar',
		    data: {
		        datasets: [
		        	{
			            label: '실시간 사용 요금',
			            data: barData,	//	bar chart
			            borderWidth: 2,
			            backgroundColor: 'rgba(255, 0, 0, 0.5)',
			            // this dataset is drawn below
			            order: 1
			        }, 
			        {
			            label: '기준 사용 요금',
			            data: lineData1,	//	line chart
			            type: 'line',
			            borderColor: 'rgba(0, 0, 255, 0.5)',
			            fill: false,
			            order: 2
			        },
			        {
			            label: '목표 사용 요금',
			            data: lineData2,	//	line chart
			            type: 'line',
			            borderColor: 'rgba(0, 180, 180, 0.5)',
			            fill: false,
			            order: 3
			        }
			        ],
		        labels: chartLabel 
		    },
		    options: {
		    	scales:{
		    		xAxes: [{
		    			gridLines: {
		                    display:false
		                },
		    			ticks: {
		    				autoSkip: false,
		    				maxRotation: 0,
		    				fontSize: 12
		    			}
		    		}],
		    		yAxes: [{
		    			ticks: {
		    				suggestedMax: 20,
		    				fontSize: 14
		    			},
		    			scaleLabel: {
		    				display: true,
		    				labelString: '원',
		    				fontSize: 14
		    			}
		    		}]
		    	},
				responsive: true,
				maintainAspectRatio: false,
			    elements: {
		            point:{
		                radius: 0
		            },
		            line: {
		            	tension: 0
		            }
		        }
			}
		});
		
		return _chart;
	}//
	
});